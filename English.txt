<!DOCTYPE html>
<html lang="en-IN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate English Poster (with Kannada)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .tense-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .tense-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .tense-card-content {
            flex-grow: 1;
        }
        .gemini-btn {
            transition: all 0.3s ease;
        }
        .gemini-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        .kannada-translation {
            font-size: 0.8rem;
            color: #6b7280; /* text-gray-500 */
            margin-left: 1.5rem; /* ml-6 */
        }
        /* Timeline styles */
        .timeline {
            position: relative;
            width: 100%;
            margin: 20px 0;
            padding: 20px 0;
            border-top: 2px solid #9ca3af; /* gray-400 */
        }
        .timeline-event {
            position: relative;
            padding-left: 20px;
            padding-bottom: 20px;
        }
        .timeline-event::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #f59e0b; /* amber-500 */
            border: 2px solid white;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-4 sm:p-6 lg:p-8">
    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-gray-900 tracking-tight">
                The Ultimate English Poster (ಕನ್ನಡದಲ್ಲಿ)
            </h1>
            <p class="mt-3 text-lg text-gray-600 max-w-3xl mx-auto">
                Master Tenses, Vocabulary, and Pronunciation with AI. (ಕಾಲಗಳು, ಶಬ್ದಕೋಶ ಮತ್ತು ಉಚ್ಚಾರಣೆಯನ್ನು ಕಲಿಯಿರಿ)
            </p>
        </header>

        <!-- Present Tenses -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-green-500 text-green-800">Present Tenses (ವರ್ತಮಾನ ಕಾಲಗಳು)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Present Simple -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-green-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-green-700 mb-2">Present Simple</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For things that are always true or happen regularly.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಯಾವಾಗಲೂ ಸತ್ಯವಾಗಿರುವ ಅಥವಾ ನಿಯಮಿತವಾಗಿ ನಡೆಯುವ ವಿಷಯಗಳಿಗೆ.</p>
                        <div class="bg-green-50 rounded-lg p-3 my-4 font-mono text-sm text-green-900">Subject + Verb (+s/es)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Present Simple">
                            <li><span class="text-green-500 mr-2">&#10148;</span>I <strong>play</strong> guitar every weekend.<br><span class="kannada-translation">ನಾನು ಪ್ರತಿ ವಾರಾಂತ್ಯದಲ್ಲಿ ಗಿಟಾರ್ ನುಡಿಸುತ್ತೇನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>He <strong>reads</strong> the newspaper in the morning.<br><span class="kannada-translation">ಅವನು ಬೆಳಿಗ್ಗೆ ವೃತ್ತಪತ್ರಿಕೆ ಓದುತ್ತಾನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>They <strong>live</strong> in a beautiful house.<br><span class="kannada-translation">ಅವರು ಸುಂದರವಾದ ಮನೆಯಲ್ಲಿ ವಾಸಿಸುತ್ತಾರೆ.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Present Simple', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Present Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-green-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-green-700 mb-2">Present Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For an action happening right now.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಇದೀಗ ನಡೆಯುತ್ತಿರುವ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-green-50 rounded-lg p-3 my-4 font-mono text-sm text-green-900">Subject + am/is/are + Verb-ing</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Present Continuous">
                            <li><span class="text-green-500 mr-2">&#10148;</span>I <strong>am learning</strong> to code.<br><span class="kannada-translation">ನಾನು ಕೋಡಿಂಗ್ ಕಲಿಯುತ್ತಿದ್ದೇನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>She <strong>is talking</strong> on the phone.<br><span class="kannada-translation">ಅವಳು ಫೋನಿನಲ್ಲಿ ಮಾತನಾಡುತ್ತಿದ್ದಾಳೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>They <strong>are playing</strong> soccer in the park.<br><span class="kannada-translation">ಅವರು ಪಾರ್ಕ್‌ನಲ್ಲಿ ಫುಟ್‌ಬಾಲ್ ಆಡುತ್ತಿದ್ದಾರೆ.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Present Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Present Perfect -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-green-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-green-700 mb-2">Present Perfect</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For a past action that has a result in the present.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ನಡೆದ ಮತ್ತು ಪ್ರಸ್ತುತದಲ್ಲಿ ಪರಿಣಾಮ ಬೀರುವ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-green-50 rounded-lg p-3 my-4 font-mono text-sm text-green-900">Subject + have/has + Past Participle</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Present Perfect">
                            <li><span class="text-green-500 mr-2">&#10148;</span>I <strong>have finished</strong> my homework.<br><span class="kannada-translation">ನಾನು ನನ್ನ ಮನೆಕೆಲಸವನ್ನು ಮುಗಿಸಿದ್ದೇನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>He <strong>has traveled</strong> to Japan.<br><span class="kannada-translation">ಅವನು ಜಪಾನ್‌ಗೆ ಪ್ರಯಾಣಿಸಿದ್ದಾನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>They <strong>have bought</strong> a new car.<br><span class="kannada-translation">ಅವರು ಹೊಸ ಕಾರು ಖರೀದಿಸಿದ್ದಾರೆ.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Present Perfect', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Present Perfect Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-green-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-green-700 mb-2">Present Perfect Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For an action that started in the past and is still continuing.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ಪ್ರಾರಂಭವಾಗಿ ಇನ್ನೂ ಮುಂದುವರಿಯುತ್ತಿರುವ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-green-50 rounded-lg p-3 my-4 font-mono text-sm text-green-900">Subject + have/has + been + Verb-ing</div>
                         <ul class="space-y-2 text-sm examples" data-tense="Present Perfect Continuous">
                            <li><span class="text-green-500 mr-2">&#10148;</span>I <strong>have been studying</strong> for three hours.<br><span class="kannada-translation">ನಾನು ಮೂರು ಗಂಟೆಗಳಿಂದ ಓದುತ್ತಿದ್ದೇನೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>She <strong>has been waiting</strong> for the bus.<br><span class="kannada-translation">ಅವಳು ಬಸ್ಸಿಗಾಗಿ ಕಾಯುತ್ತಿದ್ದಾಳೆ.</span></li>
                            <li><span class="text-green-500 mr-2">&#10148;</span>It <strong>has been raining</strong> for days.<br><span class="kannada-translation">ದಿನಗಳಿಂದ ಮಳೆ ಬರುತ್ತಿದೆ.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Present Perfect Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
            </div>
        </section>

        <!-- Past Tenses (RESTORED) -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-blue-500 text-blue-800">Past Tenses (ಭೂತ ಕಾಲಗಳು)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Past Simple -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-blue-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-blue-700 mb-2">Past Simple</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For a finished action in the past.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ಮುಗಿದುಹೋದ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-blue-50 rounded-lg p-3 my-4 font-mono text-sm text-blue-900">Subject + Verb (Past Tense)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Past Simple">
                           <li><span class="text-blue-500 mr-2">&#10148;</span>I <strong>visited</strong> my grandparents last week.<br><span class="kannada-translation">ನಾನು ಕಳೆದ ವಾರ ನನ್ನ ಅಜ್ಜ-ಅಜ್ಜಿಯನ್ನು ಭೇಟಿ ಮಾಡಿದ್ದೆ.</span></li>
                           <li><span class="text-blue-500 mr-2">&#10148;</span>She <strong>bought</strong> a new dress for the party.<br><span class="kannada-translation">ಅವಳು ಪಾರ್ಟಿಗಾಗಿ ಹೊಸ ಉಡುಪನ್ನು ಖರೀದಿಸಿದಳು.</span></li>
                           <li><span class="text-blue-500 mr-2">&#10148;</span>They <strong>played</strong> basketball after school.<br><span class="kannada-translation">ಅವರು ಶಾಲೆಯ ನಂತರ ಬಾಸ್ಕೆಟ್‌ಬಾಲ್ ಆಡಿದರು.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Past Simple', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Past Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-blue-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-blue-700 mb-2">Past Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For an action that was happening in the past.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ನಡೆಯುತ್ತಿದ್ದ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-blue-50 rounded-lg p-3 my-4 font-mono text-sm text-blue-900">Subject + was/were + Verb-ing</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Past Continuous">
                            <li><span class="text-blue-500 mr-2">&#10148;</span>I <strong>was reading</strong> when you called.<br><span class="kannada-translation">ನೀನು ಕರೆ ಮಾಡಿದಾಗ ನಾನು ಓದುತ್ತಿದ್ದೆ.</span></li>
                            <li><span class="text-blue-500 mr-2">&#10148;</span>He <strong>was sleeping</strong> when the alarm rang.<br><span class="kannada-translation">ಅಲಾರಾಂ ಬಾರಿಸಿದಾಗ ಅವನು ಮಲಗಿದ್ದ.</span></li>
                            <li><span class="text-blue-500 mr-2">&#10148;</span>We <strong>were having</strong> a picnic.<br><span class="kannada-translation">ನಾವು ಪಿಕ್ನಿಕ್ ಮಾಡುತ್ತಿದ್ದೆವು.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Past Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Past Perfect -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-blue-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-blue-700 mb-2">Past Perfect</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For a past action that happened before another past action.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ನಡೆದ ಇನ್ನೊಂದು ಕ್ರಿಯೆಗಿಂತ ಮೊದಲು ನಡೆದ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-blue-50 rounded-lg p-3 my-4 font-mono text-sm text-blue-900">Subject + had + Past Participle</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Past Perfect">
                            <li><span class="text-blue-500 mr-2">&#10148;</span>I <strong>had eaten</strong> when they arrived.<br><span class="kannada-translation">ಅವರು ಬಂದಾಗ ನಾನು ಊಟ ಮಾಡಿದ್ದೆ.</span></li>
                            <li><span class="text-blue-500 mr-2">&#10148;</span>She <strong>had studied</strong> French before moving.<br><span class="kannada-translation">ಅವಳು ಸ್ಥಳಾಂತರಗೊಳ್ಳುವ ಮೊದಲು ಫ್ರೆಂಚ್ ಅಧ್ಯಯನ ಮಾಡಿದ್ದಳು.</span></li>
                            <li><span class="text-blue-500 mr-2">&#10148;</span>They <strong>had seen</strong> the movie before.<br><span class="kannada-translation">ಅವರು ಈ ಹಿಂದೆ ಆ ಚಲನಚಿತ್ರವನ್ನು ನೋಡಿದ್ದರು.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Past Perfect', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Past Perfect Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-blue-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-blue-700 mb-2">Past Perfect Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For a long action in the past that happened before another past action.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಹಿಂದೆ ನಡೆದ ಇನ್ನೊಂದು ಕ್ರಿಯೆಗಿಂತ ಮೊದಲು ದೀರ್ಘಕಾಲ ನಡೆದ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-blue-50 rounded-lg p-3 my-4 font-mono text-sm text-blue-900">Subject + had + been + Verb-ing</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Past Perfect Continuous">
                             <li><span class="text-blue-500 mr-2">&#10148;</span>I <strong>had been waiting</strong> for an hour.<br><span class="kannada-translation">ನಾನು ಒಂದು ಗಂಟೆಯಿಂದ ಕಾಯುತ್ತಿದ್ದೆ.</span></li>
                             <li><span class="text-blue-500 mr-2">&#10148;</span>He <strong>had been working</strong> on the problem.<br><span class="kannada-translation">ಅವನು ಸಮಸ್ಯೆಯ ಮೇಲೆ ಕೆಲಸ ಮಾಡುತ್ತಿದ್ದ.</span></li>
                             <li><span class="text-blue-500 mr-2">&#10148;</span>It <strong>had been raining</strong> all day.<br><span class="kannada-translation">ದಿನವಿಡೀ ಮಳೆ ಬರುತ್ತಿತ್ತು.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Past Perfect Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
            </div>
        </section>

        <!-- Future Tenses (RESTORED) -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-purple-500 text-purple-800">Future Tenses (ಭವಿಷ್ಯತ್ ಕಾಲಗಳು)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Future Simple -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-purple-400">
                     <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-purple-700 mb-2">Future Simple</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For something that will happen in the future.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಭವಿಷ್ಯದಲ್ಲಿ ನಡೆಯಲಿರುವ ವಿಷಯಕ್ಕಾಗಿ.</p>
                        <div class="bg-purple-50 rounded-lg p-3 my-4 font-mono text-sm text-purple-900">Subject + will + Verb</div>
                         <ul class="space-y-2 text-sm examples" data-tense="Future Simple">
                             <li><span class="text-purple-500 mr-2">&#10148;</span>I <strong>will call</strong> you tomorrow.<br><span class="kannada-translation">ನಾನು ನಿನಗೆ ನಾಳೆ ಕರೆ ಮಾಡುತ್ತೇನೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>She <strong>will travel</strong> to London next year.<br><span class="kannada-translation">ಅವಳು ಮುಂದಿನ ವರ್ಷ ಲಂಡನ್‌ಗೆ ಪ್ರಯಾಣಿಸುತ್ತಾಳೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>They <strong>will build</strong> a new bridge here.<br><span class="kannada-translation">ಅವರು ಇಲ್ಲಿ ಹೊಸ ಸೇತುವೆಯನ್ನು ನಿರ್ಮಿಸುತ್ತಾರೆ.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-purple-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Future Simple', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Future Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-purple-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-purple-700 mb-2">Future Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For an action that will be happening at a specific time in the future.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಭವಿಷ್ಯದಲ್ಲಿ ಒಂದು ನಿರ್ದಿಷ್ಟ ಸಮಯದಲ್ಲಿ ನಡೆಯಲಿರುವ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-purple-50 rounded-lg p-3 my-4 font-mono text-sm text-purple-900">Subject + will be + Verb-ing</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Future Continuous">
                             <li><span class="text-purple-500 mr-2">&#10148;</span>I <strong>will be waiting</strong> for you.<br><span class="kannada-translation">ನಾನು ನಿನಗಾಗಿ ಕಾಯುತ್ತಿರುತ್ತೇನೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>He <strong>will be watching</strong> the game.<br><span class="kannada-translation">ಅವನು ಆಟ ನೋಡುತ್ತಿರುತ್ತಾನೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>We <strong>will be having</strong> dinner at 8 PM.<br><span class="kannada-translation">ನಾವು ರಾತ್ರಿ 8 ಗಂಟೆಗೆ ಊಟ ಮಾಡುತ್ತಿರುತ್ತೇವೆ.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-purple-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Future Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Future Perfect -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-purple-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-purple-700 mb-2">Future Perfect</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For an action that will be finished by a certain time in the future.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಭವಿಷ್ಯದಲ್ಲಿ ಒಂದು ನಿರ್ದಿಷ್ಟ ಸಮಯದೊಳಗೆ ಮುಗಿಯಲಿರುವ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-purple-50 rounded-lg p-3 my-4 font-mono text-sm text-purple-900">Subject + will have + Past Participle</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Future Perfect">
                           <li><span class="text-purple-500 mr-2">&#10148;</span>I <strong>will have finished</strong> this book by tomorrow.<br><span class="kannada-translation">ನಾನು ನಾಳೆಯೊಳಗೆ ಈ ಪುಸ್ತಕವನ್ನು ಮುಗಿಸಿರುತ್ತೇನೆ.</span></li>
                           <li><span class="text-purple-500 mr-2">&#10148;</span>You <strong>will have graduated</strong> by next year.<br><span class="kannada-translation">ನೀನು ಮುಂದಿನ ವರ್ಷದೊಳಗೆ ಪದವಿ ಪಡೆದಿರುತ್ತೀಯ.</span></li>
                           <li><span class="text-purple-500 mr-2">&#10148;</span>They <strong>will have completed</strong> the project.<br><span class="kannada-translation">ಅವರು ಯೋಜನೆಯನ್ನು ಪೂರ್ಣಗೊಳಿಸಿರುತ್ತಾರೆ.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-purple-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Future Perfect', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Future Perfect Continuous -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-purple-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-purple-700 mb-2">Future Perfect Continuous</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> For a long action that will continue until a specific point in the future.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಭವಿಷ್ಯದಲ್ಲಿ ಒಂದು ನಿರ್ದಿಷ್ಟ ಸಮಯದವರೆಗೆ ಮುಂದುವರಿಯುವ ದೀರ್ಘ ಕ್ರಿಯೆಗಾಗಿ.</p>
                        <div class="bg-purple-50 rounded-lg p-3 my-4 font-mono text-sm text-purple-900">Subject + will have been + Verb-ing</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Future Perfect Continuous">
                             <li><span class="text-purple-500 mr-2">&#10148;</span>I <strong>will have been working</strong> here for ten years.<br><span class="kannada-translation">ನಾನು ಇಲ್ಲಿ ಹತ್ತು ವರ್ಷಗಳಿಂದ ಕೆಲಸ ಮಾಡುತ್ತಿರುತ್ತೇನೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>He <strong>will have been driving</strong> all day.<br><span class="kannada-translation">ಅವನು ದಿನವಿಡೀ ಚಾಲನೆ ಮಾಡುತ್ತಿರುತ್ತಾನೆ.</span></li>
                             <li><span class="text-purple-500 mr-2">&#10148;</span>They <strong>will have been waiting</strong> for weeks.<br><span class="kannada-translation">ಅವರು ವಾರಗಟ್ಟಲೆ ಕಾಯುತ್ತಿರುತ್ತಾರೆ.</span></li>
                        </ul>
                    </div>
                     <button class="gemini-btn mt-4 w-full bg-purple-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Future Perfect Continuous', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
            </div>
        </section>

        <!-- Modal Verbs (RESTORED) -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-teal-500 text-teal-800">Modal Verbs (ಸಹಾಯಕ ಕ್ರಿಯಾಪದಗಳು)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Could -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Could</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Possibility, past ability, polite request.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಸಾಧ್ಯತೆ, ಹಿಂದಿನ ಸಾಮರ್ಥ್ಯ, ವಿನಂತಿಯ ಮನವಿ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + could + Verb</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Could">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>It <strong>could</strong> rain tomorrow.<br><span class="kannada-translation">ನಾಳೆ ಮಳೆ ಬರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>I <strong>could</strong> swim when I was five.<br><span class="kannada-translation">ನಾನು ಐದು ವರ್ಷದವನಿದ್ದಾಗ ಈಜಬಲ್ಲೆನಾಗಿದ್ದೆ.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span><strong>Could</strong> you pass the salt, please?<br><span class="kannada-translation">ದಯವಿಟ್ಟು ಉಪ್ಪನ್ನು ಕೊಡಬಹುದೇ?</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Could', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                 <!-- Could be -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Could be</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Expresses a possibility or speculation.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಒಂದು ಸಾಧ್ಯತೆ ಅಥವಾ ಊಹೆಯನ್ನು ವ್ಯಕ್ತಪಡಿಸುತ್ತದೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + could be + (Adjective/Noun/Verb-ing)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Could be">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>He <strong>could be</strong> at home.<br><span class="kannada-translation">ಅವನು ಮನೆಯಲ್ಲಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>This <strong>could be</strong> the right answer.<br><span class="kannada-translation">ಇದು ಸರಿಯಾದ ಉತ್ತರವಾಗಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>She <strong>could be</strong> joking.<br><span class="kannada-translation">ಅವಳು ತಮಾಷೆ ಮಾಡುತ್ತಿರಬಹುದು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Could be', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Should -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Should</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Advice, recommendation, or obligation.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಸಲಹೆ, ಶಿಫಾರಸು, ಅಥವಾ ಕರ್ತವ್ಯ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + should + Verb</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Should">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>You <strong>should</strong> see a doctor.<br><span class="kannada-translation">ನೀನು ವೈದ್ಯರನ್ನು ನೋಡಬೇಕು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>We <strong>should</strong> finish this work today.<br><span class="kannada-translation">ನಾವು ಇಂದು ಈ ಕೆಲಸವನ್ನು ಮುಗಿಸಬೇಕು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>He <strong>should</strong> try the new restaurant.<br><span class="kannada-translation">ಅವನು ಹೊಸ ರೆಸ್ಟೋರೆಂಟ್ ಪ್ರಯತ್ನಿಸಬೇಕು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Should', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                 <!-- Should be -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Should be</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Expresses an expectation or what is believed to be the correct situation.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಒಂದು ನಿರೀಕ್ಷೆ ಅಥವಾ ಸರಿಯಾದ ಪರಿಸ್ಥಿತಿ ಎಂದು ನಂಬುವುದನ್ನು ವ್ಯಕ್ತಪಡಿಸುತ್ತದೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + should be + (Adjective/Noun/Verb-ing)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Should be">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>The train <strong>should be</strong> on time.<br><span class="kannada-translation">ರೈಲು ಸಮಯಕ್ಕೆ ಸರಿಯಾಗಿ ಬರಬೇಕು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>You <strong>should be</strong> studying for your exam.<br><span class="kannada-translation">ನೀನು ನಿನ್ನ ಪರೀಕ್ಷೆಗಾಗಿ ಓದುತ್ತಿರಬೇಕು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>This <strong>should be</strong> the place.<br><span class="kannada-translation">ಇದೇ ಸ್ಥಳವಾಗಿರಬೇಕು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Should be', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                 <!-- Would -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Would</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Polite request, hypothetical situations, past habits.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ವಿನಂತಿಯ ಮನವಿ, ಕಾಲ್ಪನಿಕ ಸನ್ನಿವೇಶಗಳು, ಹಿಂದಿನ ಅಭ್ಯಾಸಗಳು.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + would + Verb</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Would">
                           <li><span class="text-teal-500 mr-2">&#10148;</span><strong>Would</strong> you like a cup of tea?<br><span class="kannada-translation">ನೀವು ಒಂದು ಕಪ್ ಚಹಾ ಇಷ್ಟಪಡುತ್ತೀರಾ?</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>If I had money, I <strong>would</strong> travel the world.<br><span class="kannada-translation">ನನ್ನ ಬಳಿ ಹಣವಿದ್ದರೆ, ನಾನು ಜಗತ್ತನ್ನು ಸುತ್ತುತ್ತಿದ್ದೆ.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>Every day, we <strong>would</strong> go to the park.<br><span class="kannada-translation">ಪ್ರತಿದಿನ ನಾವು ಪಾರ್ಕ್‌ಗೆ ಹೋಗುತ್ತಿದ್ದೆವು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Would', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Would be -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Would be</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Describes the result of a hypothetical situation.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಕಾಲ್ಪನಿಕ ಸನ್ನಿವೇಶದ ಫಲಿತಾಂಶವನ್ನು ವಿವರಿಸುತ್ತದೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + would be + (Adjective/Noun)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Would be">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>It <strong>would be</strong> nice to go on holiday.<br><span class="kannada-translation">ರಜೆಗೆ ಹೋಗುವುದು ಚೆನ್ನಾಗಿರುತ್ತದೆ.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>That <strong>would be</strong> a great idea.<br><span class="kannada-translation">ಅದು ಒಂದು ಉತ್ತಮ ಆಲೋಚನೆಯಾಗಿರುತ್ತದೆ.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>He <strong>would be</strong> happy if you came.<br><span class="kannada-translation">ನೀನು ಬಂದರೆ ಅವನು ಸಂತೋಷಪಡುತ್ತಾನೆ.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Would be', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- May -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">May</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Formal permission, strong possibility.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಔಪಚಾರಿಕ ಅನುಮತಿ, ಬಲವಾದ ಸಾಧ್ಯತೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + may + Verb</div>
                        <ul class="space-y-2 text-sm examples" data-tense="May">
                           <li><span class="text-teal-500 mr-2">&#10148;</span><strong>May</strong> I come in?<br><span class="kannada-translation">ನಾನು ಒಳಗೆ ಬರಬಹುದೇ?</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>He <strong>may</strong> arrive late.<br><span class="kannada-translation">ಅವನು ತಡವಾಗಿ ಬರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>You <strong>may</strong> begin the exam now.<br><span class="kannada-translation">ನೀವು ಈಗ ಪರೀಕ್ಷೆಯನ್ನು ಪ್ರಾರಂಭಿಸಬಹುದು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('May', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- May be -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">May be</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> A verb phrase indicating possibility. (Note: different from 'maybe' adverb)</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ಸಾಧ್ಯತೆಯನ್ನು ಸೂಚಿಸುವ ಕ್ರಿಯಾಪದದ ಪದಗುಚ್ಛ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + may be + (Adjective/Noun/Verb-ing)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="May be">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>She <strong>may be</strong> right about that.<br><span class="kannada-translation">ಅವಳು ಆ ಬಗ್ಗೆ ಸರಿಯಾಗಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>They <strong>may be</strong> waiting for us.<br><span class="kannada-translation">ಅವರು ನಮಗಾಗಿ ಕಾಯುತ್ತಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>This <strong>may be</strong> our only chance.<br><span class="kannada-translation">ಇದು ನಮ್ಮ ಏಕೈಕ ಅವಕಾಶವಾಗಿರಬಹುದು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('May be', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Might -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Might</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> A weaker possibility than 'may'.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> 'may' ಗಿಂತ ಕಡಿಮೆ ಅಥವಾ ದುರ್ಬಲ ಸಾಧ್ಯತೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + might + Verb</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Might">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>I <strong>might</strong> go to the party, but I'm not sure.<br><span class="kannada-translation">ನಾನು ಪಾರ್ಟಿಗೆ ಹೋಗಬಹುದು, ಆದರೆ ನನಗೆ ಖಚಿತವಿಲ್ಲ.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>It <strong>might</strong> snow later tonight.<br><span class="kannada-translation">ಇಂದು ರಾತ್ರಿ ಹಿಮ ಬೀಳಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>He <strong>might</strong> know the answer.<br><span class="kannada-translation">ಅವನಿಗೆ ಉತ್ತರ ಗೊತ್ತಿರಬಹುದು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Might', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
                <!-- Might be -->
                <div class="tense-card bg-white rounded-xl shadow-md p-6 border-t-4 border-teal-400">
                    <div class="tense-card-content">
                        <h3 class="text-xl font-bold text-teal-700 mb-2">Might be</h3>
                        <p class="text-sm italic text-gray-500 mb-3"><strong>Meaning:</strong> Expresses a weak possibility or speculation.</p>
                        <p class="text-sm italic text-gray-600 mt-1"><strong>ಅರ್ಥ:</strong> ದುರ್ಬಲ ಸಾಧ್ಯತೆ ಅಥವಾ ಊಹೆಯನ್ನು ವ್ಯಕ್ತಪಡಿಸುತ್ತದೆ.</p>
                        <div class="bg-teal-50 rounded-lg p-3 my-4 font-mono text-sm text-teal-900">Subject + might be + (Adjective/Noun/Verb-ing)</div>
                        <ul class="space-y-2 text-sm examples" data-tense="Might be">
                           <li><span class="text-teal-500 mr-2">&#10148;</span>She <strong>might be</strong> busy right now.<br><span class="kannada-translation">ಅವಳು ಈಗ ಕಾರ್ಯನಿರತಳಾಗಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>This <strong>might be</strong> harder than it looks.<br><span class="kannada-translation">ಇದು ಕಾಣುವುದಕ್ಕಿಂತ ಕಷ್ಟಕರವಾಗಿರಬಹುದು.</span></li>
                           <li><span class="text-teal-500 mr-2">&#10148;</span>They <strong>might be</strong> travelling to Goa.<br><span class="kannada-translation">ಅವರು ಗೋವಾಗೆ ಪ್ರಯಾಣಿಸುತ್ತಿರಬಹುದು.</span></li>
                        </ul>
                    </div>
                    <button class="gemini-btn mt-4 w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center" onclick="generateExample('Might be', this)">
                        ✨ ಹೊಸ ಉದಾಹರಣೆ ರಚಿಸಿ
                    </button>
                </div>
            </div>
        </section>

        <!-- Pronunciation Section (RESTORED) -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-pink-500 text-pink-800">🗣️ Pronunciation Master (ಉಚ್ಚಾರಣೆ ಮಾಸ್ಟರ್)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <!-- Part 1: Daily 20 -->
                <div class="mb-10">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Daily 20 Pronunciation Challenge</h3>
                    <p class="text-gray-600 mb-4">Get 20 words with easy-to-read phonetic spelling (e.g., Data = DAY-ta).</p>
                    <div class="text-center mb-6">
                        <button id="pronounce-daily-btn" class="gemini-btn bg-pink-500 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center mx-auto">
                            Get Today's 20 Words
                        </button>
                    </div>
                    <div id="pronounce-daily-list" class="overflow-x-auto">
                        <!-- Table will appear here -->
                         <p class="text-gray-500 text-center italic">Click the button to load today's challenge!</p>
                    </div>
                </div>

                <!-- Part 2: Search -->
                <div class="pt-8 border-t-2 border-gray-100">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">🔍 Instant Pronunciation Search</h3>
                     <p class="text-gray-600 mb-4">Type any word to see the easy way to say it.</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="pronounce-search-input" class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 text-lg" placeholder="e.g., Colonel, Schedule, Entrepreneur">
                        <button id="pronounce-search-btn" class="gemini-btn bg-gray-800 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center">
                            Search
                        </button>
                    </div>
                    <div id="pronounce-result" class="mt-6 min-h-[80px]">
                        <!-- Search result appears here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW Tongue Twister Section -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-yellow-500 text-yellow-800">🌪️ Tongue Twister Practice</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-4">Get 10 daily tongue twisters. Click the play button to hear it spoken!</p>
                <div class="text-center mb-6">
                    <button id="tongue-twister-btn" class="gemini-btn bg-yellow-500 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center mx-auto">
                        Get Today's Twisters
                    </button>
                </div>
                <div id="tongue-twister-list" class="space-y-4">
                     <!-- Twisters will appear here -->
                     <p class="text-gray-500 text-center italic">Click the button to load today's tongue twisters!</p>
                </div>
            </div>
        </section>

        <!-- Daily Vocabulary (Existing) -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-rose-500 text-rose-800">✨ Daily Vocabulary (ದೈನಂದಿನ ಶಬ್ದಕೋಶ)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-4">Click to get 10 detailed vocabulary words with examples.</p>
                <div class="text-center mb-6">
                    <button id="vocab-btn" class="gemini-btn bg-rose-500 text-white font-bold py-2 px-6 rounded-lg flex items-center justify-center mx-auto">
                        Get Detailed Vocabulary
                    </button>
                </div>
                <div id="vocab-list" class="space-y-4">
                     <p class="text-gray-500">Your vocabulary list will appear here...</p>
                </div>
            </div>
        </section>

        <!-- NEW Word Explorer Section -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-violet-500 text-violet-800">🔍 Word Explorer (ಪದ ಅನ್ವೇಷಕ)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-4">Enter any English word to understand its full meaning, usage, and Kannada translation.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="word-explorer-input" class="flex-grow w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 text-lg" placeholder="e.g., Anxious, Eager, Ubiquitous">
                    <button id="word-explorer-btn" class="gemini-btn bg-violet-500 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center">
                        Explore Word
                    </button>
                </div>
                <div id="word-explorer-result" class="mt-6 min-h-[150px]">
                    <!-- Word analysis will appear here -->
                    <p class="text-gray-500 text-center italic">Your word analysis will appear here...</p>
                </div>
            </div>
        </section>

        <!-- Past Event Visualizer -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-amber-500 text-amber-800">✨ Past Event Visualizer (ಭೂತಕಾಲದ ಘಟನೆ ದೃಶ್ಯೀಕರಣ)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-4">Confused about the order of past events? Enter a sentence and the AI will create a visual timeline.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="timeline-sentence-input" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="e.g., The train had left when I arrived.">
                    <button id="visualize-btn" class="gemini-btn bg-amber-500 text-white font-bold py-2 px-6 rounded-lg flex items-center justify-center">
                        Visualize
                    </button>
                </div>
                <div id="timeline-result" class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200 min-h-[100px]">
                    <p class="text-gray-500">Your timeline will appear here...</p>
                </div>
            </div>
        </section>

        <!-- Tense Trainer -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-indigo-500 text-indigo-800">✨ Tense Trainer (ಕಾಲ ತರಬೇತುದಾರ)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                 <p class="text-gray-600 mb-4">Test your knowledge! Fill in the blank with the correct form of the verb.</p>
                <div id="trainer-container" class="bg-indigo-50 p-6 rounded-lg">
                    <div id="question-area" class="text-center mb-4">
                        <p class="text-lg text-gray-700 mb-2" id="question-sentence">Loading your first question...</p>
                        <p class="text-sm font-semibold text-indigo-600" id="question-tense-hint"></p>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <input type="text" id="trainer-answer-input" class="flex-grow w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Your answer...">
                        <button id="check-answer-btn" class="gemini-btn bg-indigo-500 text-white font-bold py-2 px-6 rounded-lg">Check Answer</button>
                        <button id="next-question-btn" class="gemini-btn bg-gray-600 text-white font-bold py-2 px-6 rounded-lg">Next Question</button>
                    </div>
                    <div id="trainer-result" class="mt-4 text-center min-h-[2.5rem]">
                        <!-- Feedback appears here -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Tense Comparator -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-cyan-500 text-cyan-800">✨ Tense Comparator (ಕಾಲ ಹೋಲಿಕೆ)</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-6">Confused between two tenses? Select and compare.</p>
                <div class="flex flex-col sm:flex-row gap-4 mb-4 items-center">
                    <select id="tense-selector-1" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"></select>
                    <span class="text-gray-600 font-bold">vs.</span>
                    <select id="tense-selector-2" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"></select>
                    <button id="compare-btn" class="gemini-btn bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg">Compare</button>
                </div>
                <div id="comparison-result" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 min-h-[150px]">
                     <p class="text-gray-500 md:col-span-2">Your comparison will appear here...</p>
                </div>
            </div>
        </section>

        <!-- Story Weaver -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-orange-500 text-orange-800">✨ Story Weaver</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-6">Practice using tenses together! Select 2+ tenses and a topic.</p>
                
                <div id="tenseSelection" class="mb-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 text-sm">
                    <!-- Tense checkboxes will be inserted here by JS -->
                </div>

                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="storyTopic" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Enter a topic, e.g., a lost dog">
                    <button id="storyButton" class="gemini-btn bg-orange-500 text-white font-bold py-2 px-6 rounded-lg flex items-center justify-center">
                        Write Story
                    </button>
                </div>
                <div id="storyResult" class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200 min-h-[150px]">
                    <p class="text-gray-500">Your story will appear here...</p>
                </div>
            </div>
        </section>


        <!-- Gemini Tense Analyzer -->
        <section>
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b-4 border-gray-500 text-gray-800">✨ Tense Analyzer</h2>
            <div class="bg-white rounded-xl shadow-md p-6 lg:p-8">
                <p class="text-gray-600 mb-4">Enter a sentence below and let our AI assistant analyze the tense for you!</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="sentenceInput" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., The sun rises in the east.">
                    <button id="analyzeButton" class="gemini-btn bg-gray-700 text-white font-bold py-2 px-6 rounded-lg flex items-center justify-center">
                        Analyze Tense
                    </button>
                </div>
                <div id="analysisResult" class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200 min-h-[100px]">
                    <p class="text-gray-500">Your detailed analysis will appear here...</p>
                </div>
            </div>
        </section>

    </div>

    <script>
        const apiKey = ""; // Per instructions, leave this empty.
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const ttsApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

        const allTenses = [
            'Present Simple', 'Present Continuous', 'Present Perfect', 'Present Perfect Continuous',
            'Past Simple', 'Past Continuous', 'Past Perfect', 'Past Perfect Continuous',
            'Future Simple', 'Future Continuous', 'Future Perfect', 'Future Perfect Continuous'
        ];

        // Populate Story Weaver tense selection
        const tenseSelectionContainer = document.getElementById('tenseSelection');
        allTenses.forEach(tense => {
            const label = document.createElement('label');
            label.className = 'flex items-center space-x-2 cursor-pointer';
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'form-checkbox h-4 w-4 rounded text-orange-600 focus:ring-orange-500';
            checkbox.value = tense;
            label.appendChild(checkbox);
            const span = document.createElement('span');
            span.textContent = tense;
            label.appendChild(span);
            tenseSelectionContainer.appendChild(label);
        });
        
        // Populate Tense Comparator dropdowns
        const tenseSelector1 = document.getElementById('tense-selector-1');
        const tenseSelector2 = document.getElementById('tense-selector-2');
        allTenses.forEach((tense, index) => {
            const option1 = document.createElement('option');
            option1.value = tense;
            option1.textContent = tense;
            tenseSelector1.appendChild(option1);
            
            const option2 = document.createElement('option');
            option2.value = tense;
            option2.textContent = tense;
            tenseSelector2.appendChild(option2);
        });
        tenseSelector1.selectedIndex = 4; // Default to 'Past Simple'
        tenseSelector2.selectedIndex = 6; // Default to 'Past Perfect'


        // Function to call Gemini API with exponential backoff
        async function callGemini(payload, maxRetries = 5) {
            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        const candidate = result.candidates?.[0];
                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            return candidate.content.parts[0].text;
                        } else {
                            // Handle cases where the API returns a valid response but no text
                            let errorReason = "Unknown reason for empty response.";
                            if (result.promptFeedback?.blockReason) {
                                errorReason = `Blocked for: ${result.promptFeedback.blockReason}`;
                            } else if (candidate?.finishReason) {
                                 errorReason = `Finished for reason: ${candidate.finishReason}`;
                            }
                             throw new Error(`Invalid response structure from API. ${errorReason}`);
                        }
                    } else {
                         throw new Error(`API request failed with status: ${response.status}`);
                    }
                } catch (error) {
                    console.error(`Attempt ${attempt + 1} failed:`, error.message);
                    attempt++;
                    if (attempt >= maxRetries) {
                        return "{\"error\": \"Sorry, I couldn't generate a response right now. Please try again later.\"}";
                    }
                    const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        // --- TTS Helper Functions ---
        // Converts Base64 string to ArrayBuffer
        function base64ToArrayBuffer(base64) {
            const binaryString = window.atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        // Converts raw PCM data to a WAV file (Blob)
        function pcmToWav(pcmData, sampleRate) {
            const numChannels = 1;
            const bitsPerSample = 16;
            const dataSize = pcmData.length * pcmData.BYTES_PER_ELEMENT;
            const buffer = new ArrayBuffer(44 + dataSize);
            const view = new DataView(buffer);

            // RIFF header
            view.setUint32(0, 0x52494646, false); // "RIFF"
            view.setUint32(4, 36 + dataSize, true); // file size - 8
            view.setUint32(8, 0x57415645, false); // "WAVE"
            
            // fmt chunk
            view.setUint32(12, 0x666D7420, false); // "fmt "
            view.setUint32(16, 16, true); // chunk size
            view.setUint16(20, 1, true); // audio format (1 = PCM)
            view.setUint16(22, numChannels, true); // num channels
            view.setUint32(24, sampleRate, true); // sample rate
            view.setUint32(28, sampleRate * numChannels * (bitsPerSample / 8), true); // byte rate
            view.setUint16(32, numChannels * (bitsPerSample / 8), true); // block align
            view.setUint16(34, bitsPerSample, true); // bits per sample
            
            // data chunk
            view.setUint32(36, 0x64617461, false); // "data"
            view.setUint32(40, dataSize, true); // data size

            // Write PCM data
            const pcm16 = new Int16Array(buffer, 44);
            pcm16.set(pcmData);
            
            return new Blob([buffer], { type: 'audio/wav' });
        }
        // --- End TTS Helper Functions ---


        // --- NEW FEATURE: Daily 20 Pronunciation ---
        const pronounceDailyBtn = document.getElementById('pronounce-daily-btn');
        const pronounceDailyList = document.getElementById('pronounce-daily-list');

        pronounceDailyBtn.addEventListener('click', async () => {
            const originalText = pronounceDailyBtn.innerHTML;
            pronounceDailyBtn.innerHTML = '<div class="loader"></div>';
            pronounceDailyBtn.disabled = true;
            pronounceDailyList.innerHTML = '<p class="text-gray-500 text-center italic">Loading your 20 words...</p>';

            const systemPrompt = "You are an English teacher helping Kannada-speaking students with pronunciation. Use simple, non-IPA phonetic respelling (e.g., 'Banana' -> 'buh-NAN-uh'). Capitalize the stressed syllable.";
            const userPrompt = `Generate a list of 20 common English words that are often mispronounced by Kannada speakers. For each, provide: 1) The word. 2) A very simple phonetic pronunciation guide (NOT IPA, use easy spelling like 'Data' -> 'DAY-ta'). Capitalize the stressed syllable. 3) The Kannada meaning. Return ONLY raw JSON: {"words": [{"word": "...", "phonetic": "...", "kannada": "..."}]}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json", temperature: 0.8 }
            };

            try {
                const responseText = await callGemini(payload);
                const data = JSON.parse(responseText);

                if (data.words && data.words.length > 0) {
                    let tableHTML = `
                        <table class="min-w-full bg-white rounded-lg overflow-hidden shadow-sm">
                            <thead class="bg-pink-100 text-pink-800">
                                <tr>
                                    <th class="py-3 px-4 text-left">Word (ಪದ)</th>
                                    <th class="py-3 px-4 text-left">Easy Pronunciation (ಉಚ್ಚಾರಣೆ)</th>
                                    <th class="py-3 px-4 text-left">Meaning (ಅರ್ಥ)</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                    `;
                    data.words.forEach(item => {
                        tableHTML += `
                            <tr class="hover:bg-pink-50 transition-colors">
                                <td class="py-3 px-4 font-semibold text-gray-800">${item.word}</td>
                                <td class="py-3 px-4 font-mono text-pink-600 bg-gray-50 rounded">${item.phonetic}</td>
                                <td class="py-3 px-4 text-gray-600">${item.kannada}</td>
                            </tr>
                        `;
                    });
                    tableHTML += '</tbody></table>';
                    pronounceDailyList.innerHTML = tableHTML;
                } else {
                    throw new Error("No words returned from API.");
                }
            } catch (e) {
                pronounceDailyList.innerHTML = '<p class="text-red-500 text-center">Error loading daily words. Please try again.</p>';
                console.error(e);
            }
            pronounceDailyBtn.innerHTML = originalText;
            pronounceDailyBtn.disabled = false;
        });

        // --- NEW FEATURE: Pronunciation Search ---
        const pronounceSearchBtn = document.getElementById('pronounce-search-btn');
        const pronounceSearchInput = document.getElementById('pronounce-search-input');
        const pronounceResult = document.getElementById('pronounce-result');

        async function searchPronunciation() {
            const word = pronounceSearchInput.value.trim();
            if (!word) {
                pronounceResult.innerHTML = '<p class="text-red-500">Please enter a word to search.</p>';
                return;
            }

            const originalText = pronounceSearchBtn.innerHTML;
            pronounceSearchBtn.innerHTML = '<div class="loader"></div>';
            pronounceSearchBtn.disabled = true;
            pronounceResult.innerHTML = `<p class="text-gray-500">Searching for "${word}"...</p>`;

            const systemPrompt = "You are an English teacher helping Kannada-speaking students. Provide a simple, non-IPA phonetic respelling (e.g., 'Data' -> 'DAY-ta') and the Kannada meaning for the given word.";
            const userPrompt = `Provide the easy phonetic pronunciation for the word "${word}". Use simple respelling (e.g., 'Schedule' -> 'SKEJ-ool' or 'SHED-yool'). Capitalize the stressed syllable. Also provide its simple Kannada meaning. Respond ONLY in JSON format: {"word": "${word}", "phonetic": "...", "kannada": "..."}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json" }
            };

            try {
                 const responseText = await callGemini(payload);
                 const data = JSON.parse(responseText);

                 if (data.phonetic && data.kannada) {
                     pronounceResult.innerHTML = `
                        <div class="p-4 bg-pink-50 border-l-4 border-pink-500 rounded-r-lg flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div>
                                <h4 class="text-2xl font-extrabold text-gray-800">${data.word}</h4>
                                <p class="text-gray-600">${data.kannada}</p>
                            </div>
                            <div class="text-right">
                                <p class"text-xl md:text-3xl font-mono text-pink-600 bg-white px-4 py-2 rounded shadow-sm">${data.phonetic}</p>
                            </div>
                        </div>
                     `;
                 } else {
                    throw new Error("Phonetic or Kannada meaning missing in response.");
                 }
            } catch (e) {
                 pronounceResult.innerHTML = `<p class="text-red-500">Could not find pronunciation for "${word}". Please check the spelling or try another word.</p>`;
                 console.error(e);
            }

            pronounceSearchBtn.innerHTML = "Search";
            pronounceSearchBtn.disabled = false;
        }

        pronounceSearchBtn.addEventListener('click', searchPronunciation);
        pronounceSearchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchPronunciation();
            }
        });

        // --- NEW FEATURE: Tongue Twisters ---
        const tongueTwisterBtn = document.getElementById('tongue-twister-btn');
        const tongueTwisterList = document.getElementById('tongue-twister-list');

        tongueTwisterBtn.addEventListener('click', getTongueTwisters);

        async function getTongueTwisters() {
            const originalText = tongueTwisterBtn.innerHTML;
            tongueTwisterBtn.innerHTML = '<div class="loader"></div>';
            tongueTwisterBtn.disabled = true;
            tongueTwisterList.innerHTML = '<p class="text-gray-500 text-center italic">Loading your 10 tongue twisters...</p>';

            const systemPrompt = "You are an English speech coach. Provide 10 tongue twisters for practice, ranging from easy to hard.";
            const userPrompt = `Generate 10 tongue twisters. For each, provide the twister and what sound it focuses on (e.g., 'S', 'P', 'R'). Respond ONLY in JSON format: {"twisters": [{"twister": "...", "focus": "..."}]}`;
            
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json", temperature: 1.0 }
            };

            try {
                const responseText = await callGemini(payload);
                const data = JSON.parse(responseText);

                if (data.twisters && data.twisters.length > 0) {
                    let html = '';
                    data.twisters.forEach(item => {
                        html += `
                        <div class="p-4 bg-yellow-50 rounded-lg border border-yellow-200 flex flex-col sm:flex-row items-center justify-between gap-3">
                            <div>
                                <p class="text-lg font-semibold text-yellow-900">${item.twister}</p>
                                <p class="text-sm text-yellow-700">Focus: <strong>${item.focus}</strong></p>
                            </div>
                            <button class="play-twister-btn gemini-btn bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center w-full sm:w-auto" data-text="${item.twister.replace(/"/g, '&quot;')}">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path></svg>
                                <span class="ml-2">Play</span>
                            </button>
                        </div>
                        `;
                    });
                    tongueTwisterList.innerHTML = html;
                } else {
                    throw new Error("No twisters returned.");
                }
            } catch (e) {
                tongueTwisterList.innerHTML = '<p class="text-red-500 text-center">Error loading tongue twisters. Please try again.</p>';
                console.error(e);
            }
            tongueTwisterBtn.innerHTML = originalText;
            tongueTwisterBtn.disabled = false;
        }

        // Event listener for playing tongue twister audio
        tongueTwisterList.addEventListener('click', async (e) => {
            const playBtn = e.target.closest('.play-twister-btn');
            if (playBtn) {
                const twisterText = playBtn.dataset.text;
                if (!twisterText || playBtn.disabled) return;

                const originalBtnHTML = playBtn.innerHTML;
                playBtn.innerHTML = '<div class="loader"></div>';
                playBtn.disabled = true;

                const payload = {
                    contents: [{
                        parts: [{ text: `Say this clearly and at a moderate pace: ${twisterText}` }]
                    }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: {
                            voiceConfig: {
                                prebuiltVoiceConfig: { voiceName: "Puck" } // 'Puck' is upbeat and clear
                            }
                        }
                    },
                    model: "gemini-2.5-flash-preview-tts"
                };

                try {
                    const response = await fetch(ttsApiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`TTS API failed: ${response.status}`);
                    
                    const result = await response.json();
                    const part = result?.candidates?.[0]?.content?.parts?.[0];
                    const audioData = part?.inlineData?.data;
                    const mimeType = part?.inlineData?.mimeType;

                    if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
                        const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                        const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 24000; // Default to 24000
                        
                        const pcmData = base64ToArrayBuffer(audioData);
                        const pcm16 = new Int16Array(pcmData);
                        const wavBlob = pcmToWav(pcm16, sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);
                        
                        const audio = new Audio(audioUrl);
                        audio.play();

                        audio.onended = () => {
                            playBtn.innerHTML = originalBtnHTML;
                            playBtn.disabled = false;
                            URL.revokeObjectURL(audioUrl); // Clean up blob URL
                        };
                        audio.onerror = () => {
                             playBtn.innerHTML = originalBtnHTML;
                             playBtn.disabled = false;
                        }
                    } else {
                        throw new Error("Invalid TTS audio data in response.");
                    }
                } catch (error) {
                    console.error("Error playing TTS:", error);
                    playBtn.innerHTML = originalBtnHTML;
                    playBtn.disabled = false;
                }
            }
        });

        // --- Existing Features ---

        // Feature 1: Generate New Example Sentence
        async function generateExample(tense, buttonElement) {
            const originalText = buttonElement.innerHTML;
            buttonElement.innerHTML = '<div class="loader"></div>';
            buttonElement.disabled = true;

            const prompt = `Generate one creative and clear example sentence for the English tense or modal phrase: '${tense}'. Provide your response in JSON format with two keys: "english" and "kannada". The sentence should be interesting for someone learning English. Do not add any extra text, just the JSON object.`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: { responseMimeType: "application/json", temperature: 0.8, maxOutputTokens: 100 }
            };

            const responseText = await callGemini(payload);
            
            try {
                const result = JSON.parse(responseText);
                if(result.english && result.kannada) {
                    const examplesList = buttonElement.closest('.tense-card').querySelector('.examples');
                    const colorClass = examplesList.querySelector('span').className.match(/text-\w+-\d+/)[0];

                    const newLi = document.createElement('li');
                    newLi.innerHTML = `<span class="${colorClass} mr-2">&#10148;</span><span>${result.english.replace(/\"/g, '')}</span><br><span class="kannada-translation">${result.kannada.replace(/\"/g, '')}</span>`;
                    
                    examplesList.appendChild(newLi);
                }
            } catch (error) {
                console.error("Error parsing new example JSON:", error);
            }

            buttonElement.innerHTML = originalText;
            buttonElement.disabled = false;
        }

        // Feature 2: Tense Analyzer
        const analyzeButton = document.getElementById('analyzeButton');
        const sentenceInput = document.getElementById('sentenceInput');
        const analysisResult = document.getElementById('analysisResult');

        analyzeButton.addEventListener('click', analyzeSentence);

        async function analyzeSentence() {
            const userSentence = sentenceInput.value;
            if (!userSentence.trim()) {
                analysisResult.innerHTML = '<p class="text-red-500">Please enter a sentence to analyze.</p>';
                return;
            }

            const originalButtonText = analyzeButton.innerHTML;
            analyzeButton.innerHTML = '<div class="loader"></div>';
            analyzeButton.disabled = true;
            analysisResult.innerHTML = '<p class="text-gray-500">Analyzing your sentence...</p>';

            const systemPrompt = `You are an expert English grammar teacher. Analyze the user's sentence to identify the tense or modal verb used.
Keep all explanations and examples simple, clear, and easy for an English language learner to understand. Avoid jargon and complex sentences.
All example sentences you generate must be not only grammatically correct but also natural and semantically appropriate (e.g., use 'she is beautiful' or 'he is handsome', not 'she is handsome').
Your response must be in JSON format according to this exact schema:
{
  "tense_name": "string",
  "explanation_details": {
    "structure": "string (Describe the grammatical formula)",
    "usage": "string (Explain when and where to use it)"
  },
  "is_correct": boolean,
  "final_correct_sentence": "string (If the user's sentence is correct, this is the original sentence. If it's incorrect, this is the corrected version.)",
  "correction_explanation": "string | null (An explanation of the correction, or null if it was already correct.)",
  "new_example": {
    "english": "string (a new, grammatically correct, and semantically natural example sentence as per the rules above)"
  }
}
Do not output markdown or any other text, only the JSON object.`;
            
            const payload = {
                contents: [{ parts: [{ text: `Analyze this sentence: "${userSentence}"` }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json" }
            };
            
            const responseText = await callGemini(payload);

            try {
                const result = JSON.parse(responseText);
                if(result.error) {
                    throw new Error(result.error);
                }

                let htmlOutput = `<h4 class="font-bold text-lg text-gray-800 mb-3">${result.tense_name}</h4>`;
                
                if (result.explanation_details) {
                    htmlOutput += `
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700"><strong>Structure:</strong></p>
                            <p class="text-gray-600 font-mono bg-gray-100 p-2 rounded mt-1">${result.explanation_details.structure}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-700"><strong>Usage:</strong></p>
                            <p class="text-gray-600 mt-1">${result.explanation_details.usage}</p>
                        </div>
                    `;
                }

                if (result.is_correct) {
                    // It's correct, show the correct sentence in green
                    htmlOutput += `
                        <div class="mt-4 p-3 bg-green-100 border-l-4 border-green-500 text-green-800 rounded-r-lg">
                            <p><strong class="font-semibold">This sentence is grammatically correct!</strong></p>
                            <p class="mt-2"><strong>Correct Sentence:</strong> ${result.final_correct_sentence}</p> 
                        </div>
                    `;
                } else {
                    // It's incorrect, show the correction in yellow
                    htmlOutput += `
                        <div class="mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                            <p><strong class="font-semibold">Correction Needed:</strong></p>
                            <p class="mt-2"><strong>Correct Sentence:</strong> ${result.final_correct_sentence}</p>
                            <p class="mt-1"><strong class="font-semibold">Explanation:</strong> ${result.correction_explanation || 'The tense or grammar was incorrect.'}</p>
                        </div>
                    `;
                }

                if (result.new_example && result.new_example.english) {
                    htmlOutput += `
                        <div class="mt-4 p-3 bg-sky-100 border-l-4 border-sky-500 text-sky-800 rounded-r-lg">
                            <p class="font-semibold">Another Example:</p>
                            <p class="mt-1">${result.new_example.english}</p>
                        </div>
                    `;
                }
                analysisResult.innerHTML = htmlOutput;
            } catch (error) {
                console.error("Error processing analysis:", error);
                analysisResult.innerHTML = `<p class="text-red-500">Sorry, there was an error analyzing the sentence. The AI response might be malformed. Please try again.</p>`;
            }

            analyzeButton.innerHTML = originalButtonText;
            analyzeButton.disabled = false;
        }
        
        // Feature 3: Story Weaver
        const storyButton = document.getElementById('storyButton');
        const storyTopicInput = document.getElementById('storyTopic');
        const storyResult = document.getElementById('storyResult');

        storyButton.addEventListener('click', generateStory);
        
        async function generateStory() {
            const selectedTenses = Array.from(tenseSelectionContainer.querySelectorAll('input:checked')).map(cb => cb.value);
            const topic = storyTopicInput.value;

            if (selectedTenses.length < 2) {
                storyResult.innerHTML = '<p class="text-red-500">Please select at least 2 tenses to combine.</p>';
                return;
            }
            if (!topic.trim()) {
                storyResult.innerHTML = '<p class="text-red-500">Please enter a topic for the story.</p>';
                return;
            }

            const originalButtonText = storyButton.innerHTML;
            storyButton.innerHTML = '<div class="loader"></div>';
            storyButton.disabled = true;
            storyResult.innerHTML = '<p class="text-gray-500">Weaving your story...</p>';

            const systemPrompt = `You are a creative storyteller. Write a short, cohesive story paragraph (3-5 sentences) based on the user's topic. The story should be simple and easy to understand, using clear vocabulary suitable for an English learner. You MUST strictly use ONLY the provided English tenses. Respond in JSON format: {"story_english": "..."}. Do not use any tenses other than the ones specified.`;
            const userPrompt = `Create a story about: "${topic}". The only allowed tenses are: ${selectedTenses.join(', ')}.`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json", temperature: 0.8 }
            };

            const responseText = await callGemini(payload);
            
             try {
                const result = JSON.parse(responseText);
                if(result.error) {
                    throw new Error(result.error);
                }

                if (result.story_english) {
                     storyResult.innerHTML = `
                        <p class="text-gray-800">${result.story_english}</p>
                     `;
                } else {
                    throw new Error("Story fields missing in response.");
                }

            } catch (error) {
                console.error("Error processing story:", error);
                storyResult.innerHTML = `<p class="text-red-500">Sorry, there was an error generating the story. Please try a different topic or tense combination.</p>`;
            }


            storyButton.innerHTML = originalButtonText;
            storyButton.disabled = false;
        }
        
        // Feature 4: Tense Trainer
        const questionSentenceEl = document.getElementById('question-sentence');
        const tenseHintEl = document.getElementById('question-tense-hint');
        const answerInputEl = document.getElementById('trainer-answer-input');
        const checkAnswerBtn = document.getElementById('check-answer-btn');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const trainerResultEl = document.getElementById('trainer-result');
        
        let currentQuestion = {};

        async function generateTrainerQuestion() {
            questionSentenceEl.textContent = 'Generating new question...';
            tenseHintEl.textContent = '';
            trainerResultEl.innerHTML = '';
            answerInputEl.value = '';
            checkAnswerBtn.disabled = true;
            nextQuestionBtn.disabled = true;

            const systemPrompt = `You are an English teacher creating grammar exercises. Your task is to generate a single fill-in-the-blank sentence to test a user on English tenses. Randomly select one of the 12 main English tenses. The sentence should be simple and clear for an English learner.`;
            const userPrompt = `Generate a question. The response must be a JSON object with four keys: "sentence" (the sentence with '_____' for the blank), "base_verb" (the verb in its base form), "tense_to_use" (the name of the tense to be applied), and "correct_answer" (the correctly conjugated verb).`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json", temperature: 1.0 }
            };
            
            const responseText = await callGemini(payload);
            try {
                const result = JSON.parse(responseText);
                if (result.sentence) {
                    currentQuestion = result;
                    questionSentenceEl.textContent = `${currentQuestion.sentence} (${currentQuestion.base_verb})`;
                    tenseHintEl.textContent = `Use: ${currentQuestion.tense_to_use}`;
                } else {
                     throw new Error("Invalid question format from API");
                }
            } catch (e) {
                questionSentenceEl.textContent = 'Could not load a question. Please try again.';
                console.error("Error generating trainer question:", e);
            }
             checkAnswerBtn.disabled = false;
             nextQuestionBtn.disabled = false;
        }

        async function checkTrainerAnswer() {
            const userAnswer = answerInputEl.value.trim();
            if (!userAnswer) {
                trainerResultEl.innerHTML = `<p class="text-yellow-600">Please enter an answer.</p>`;
                return;
            }

            checkAnswerBtn.disabled = true;
            
            const systemPrompt = `You are a helpful and encouraging English grammar tutor. You are checking a user's answer for a fill-in-the-blank question. Provide simple, clear explanations.`;
            const userPrompt = `The correct answer is "${currentQuestion.correct_answer}". The user answered: "${userAnswer}". Is the user's answer correct (be lenient with capitalization)? Provide a very short, simple explanation for your decision. Respond in JSON with two keys: "is_correct" (boolean) and "explanation" (a string with feedback).`;

            const payload = {
                 contents: [{ parts: [{ text: userPrompt }] }],
                 systemInstruction: { parts: [{ text: systemPrompt }] },
                 generationConfig: { responseMimeType: "application/json" }
            };

            const responseText = await callGemini(payload);
            try {
                 const result = JSON.parse(responseText);
                 if (result.is_correct) {
                     trainerResultEl.innerHTML = `<p class="text-green-600 font-bold">${result.explanation}</p>`;
                 } else {
                     trainerResultEl.innerHTML = `<p class="text-red-600">${result.explanation} The correct answer is <strong>${currentQuestion.correct_answer}</strong>.</p>`;
                 }
            } catch(e) {
                trainerResultEl.innerHTML = `<p class="text-red-500">Sorry, couldn't check the answer.</p>`;
                console.error("Error checking trainer answer:", e);
            }
        }
        
        checkAnswerBtn.addEventListener('click', checkTrainerAnswer);
        nextQuestionBtn.addEventListener('click', generateTrainerQuestion);
        
        // Load the first question when the script runs
        document.addEventListener('DOMContentLoaded', generateTrainerQuestion);

        // Feature 5: Tense Comparator
        const compareBtn = document.getElementById('compare-btn');
        const comparisonResultEl = document.getElementById('comparison-result');

        async function compareTenses() {
            const tense1 = tenseSelector1.value;
            const tense2 = tenseSelector2.value;
            
            if (tense1 === tense2) {
                comparisonResultEl.innerHTML = '<p class="text-yellow-600 md:col-span-2">Please select two different tenses to compare.</p>';
                return;
            }

            const originalBtnText = compareBtn.innerHTML;
            compareBtn.innerHTML = '<div class="loader"></div>';
            compareBtn.disabled = true;
            comparisonResultEl.innerHTML = '<p class="text-gray-500 md:col-span-2">Generating comparison...</p>';

            const systemPrompt = "You are an expert English teacher who excels at creating simple, clear examples for Kannada-speaking language learners. Your explanations should be very easy to understand.";
            const userPrompt = `Create a comparison for a Kannada-speaking English learner between "${tense1}" and "${tense2}". Provide two simple example sentences, one for each tense, that clearly show the difference. Also, provide a very simple, one-sentence explanation for each example.
Provide the following for each tense:
1. The English example sentence.
2. The Kannada translation of the example sentence.
3. The simple English explanation.
4. The Kannada translation of the explanation.
The response must be in a JSON format: {"comparison": {"tense1": {"name": "${tense1}", "example_english": "string", "example_kannada": "string", "explanation_english": "string", "explanation_kannada": "string"}, "tense2": {"name": "${tense2}", "example_english": "string", "example_kannada": "string", "explanation_english": "string", "explanation_kannada": "string"}}}.`;
            
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json", temperature: 0.7 }
            };

            const responseText = await callGemini(payload);

            try {
                const result = JSON.parse(responseText);
                if (result.comparison && result.comparison.tense1) {
                    const comp = result.comparison;
                    comparisonResultEl.innerHTML = `
                        <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-lg text-cyan-700">${comp.tense1.name}</h4>
                            <p class="mt-2 text-gray-800"><em>"${comp.tense1.example_english}"</em></p>
                            <p class="mt-1 text-sm text-gray-500 italic"><em>"${comp.tense1.example_kannada}"</em></p>
                            <p class="mt-2 text-sm text-gray-600">${comp.tense1.explanation_english}</p>
                            <p class="mt-1 text-xs text-gray-500">${comp.tense1.explanation_kannada}</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                             <h4 class="font-bold text-lg text-cyan-700">${comp.tense2.name}</h4>
                            <p class="mt-2 text-gray-800"><em>"${comp.tense2.example_english}"</em></p>
                            <p class="mt-1 text-sm text-gray-500 italic"><em>"${comp.tense2.example_kannada}"</em></p>
                            <p class="mt-2 text-sm text-gray-600">${comp.tense2.explanation_english}</p>
                            <p class="mt-1 text-xs text-gray-500">${comp.tense2.explanation_kannada}</p>
                        </div>
                    `;
                } else {
                    throw new Error("Comparison fields missing in API response.");
                }
            } catch(e) {
                 comparisonResultEl.innerHTML = `<p class="text-red-500 md:col-span-2">Sorry, there was an error generating the comparison. Please try again.</p>`;
                 console.error("Error processing comparison:", e);
            }
            
            compareBtn.innerHTML = originalBtnText;
            compareBtn.disabled = false;
        }

        compareBtn.addEventListener('click', compareTenses);
        
        // Feature 6: Past Event Visualizer
        const visualizeBtn = document.getElementById('visualize-btn');
        const timelineSentenceInput = document.getElementById('timeline-sentence-input');
        const timelineResultEl = document.getElementById('timeline-result');

        async function visualizeEvents() {
            const sentence = timelineSentenceInput.value;
            if (!sentence.trim()) {
                timelineResultEl.innerHTML = '<p class="text-red-500">Please enter a sentence to visualize.</p>';
                return;
            }
            
            const originalBtnText = visualizeBtn.innerHTML;
            visualizeBtn.innerHTML = '<div class="loader"></div>';
            visualizeBtn.disabled = true;
            timelineResultEl.innerHTML = '<p class="text-gray-500">Analyzing the sequence of events...</p>';
            
            const systemPrompt = "You are an expert in English grammar, specializing in visualizing event sequences for language learners. Analyze the user's sentence to identify distinct events and their chronological order. Provide a simple explanation.";
            const userPrompt = `Analyze the sequence of events in this sentence: "${sentence}". Respond in JSON format: {"events": [{"action": "string", "tense": "string", "order": number}], "summary_explanation": "string"}. The 'order' key should be 1 for the first event that happened, 2 for the second, and so on. Extract the core action for the 'action' key.`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json" }
            };

            const responseText = await callGemini(payload);
Read_Text:
            try {
                const result = JSON.parse(responseText);
                if (result.events && result.events.length > 0) {
                    // Sort events by order just in case the AI doesn't
                    result.events.sort((a, b) => a.order - b.order);
                    
                    let timelineHTML = '<div class="timeline">';
                    result.events.forEach(event => {
                        timelineHTML += `
                            <div class="timeline-event">
                                <p class="font-bold text-gray-800">${event.action} <span class="text-sm font-normal text-amber-700">(${event.tense})</span></p>
                                <p class="text-sm text-gray-600">This was the <strong>${event.order === 1 ? 'first' : 'second'}</strong> event to happen.</p>
                            </div>
                        `;
                    });
                    timelineHTML += '</div>';
                    
                    timelineHTML += `<div class="mt-4 p-3 bg-amber-50 border-l-4 border-amber-500 text-amber-800 rounded-r-lg">
                        <p><strong>Summary:</strong> ${result.summary_explanation}</p>
                    </div>`;

                    timelineResultEl.innerHTML = timelineHTML;
                } else {
                     throw new Error("No events found in API response.");
                }

            } catch (e) {
                timelineResultEl.innerHTML = `<p class="text-red-500">Sorry, I couldn't create a timeline for that sentence. Please try another one with clear past events.</p>`;
                console.error("Error processing timeline:", e);
            }

            visualizeBtn.innerHTML = originalBtnText;
            visualizeBtn.disabled = false;
        }

        visualizeBtn.addEventListener('click', visualizeEvents);
        
        // Feature 7: Daily Vocabulary
        const vocabBtn = document.getElementById('vocab-btn');
        const vocabListEl = document.getElementById('vocab-list');
        
        async function getTodaysVocabulary() {
            const originalBtnText = vocabBtn.innerHTML;
            vocabBtn.innerHTML = '<div class="loader"></div>';
            vocabBtn.disabled = true;
            vocabListEl.innerHTML = '<p class="text-gray-500">Fetching today\'s words...</p>';

            const systemPrompt = "You are an English teacher providing a vocabulary list for Kannada-speaking students. Your task is to provide clear and simple definitions and examples.";
            const userPrompt = `Generate a list of 10 useful, intermediate-level English vocabulary words. For each word, provide a simple English meaning, its Kannada translation, a simple English example sentence using the word, the Kannada translation of that sentence, the grammatical tense/form of the sentence in English, and the tense/form in Kannada. Return the response as a JSON object with a single key 'vocabulary' which is an array of objects. Each object in the array should have these keys: 'word', 'meaning_english', 'meaning_kannada', 'example_english', 'example_kannada', 'tense_form_english', 'tense_form_kannada'.`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json" }
            };

            const responseText = await callGemini(payload);
            
            try {
                const result = JSON.parse(responseText);
                if (result.vocabulary && result.vocabulary.length > 0) {
                    vocabListEl.innerHTML = ''; // Clear loading text
                    let vocabHTML = '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
                    result.vocabulary.forEach(item => {
                        vocabHTML += `
                            <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                <h4 class="font-bold text-lg text-rose-700">${item.word}</h4>
                                <p class="mt-1 text-gray-700">${item.meaning_english}</p>
                                <p class="mt-1 text-sm text-gray-500">${item.meaning_kannada}</p>
                                <div class="mt-3 pt-3 border-t border-gray-200">
                                    <p class="font-semibold text-sm text-gray-600">Example:</p>
                                    <p class="text-gray-800 italic">"${item.example_english}"</p>
                                    <p class="text-sm text-gray-500 italic">"${item.example_kannada}"</p>
                                    <p class="text-xs text-rose-600 mt-1"><strong>Form:</strong> ${item.tense_form_english} (${item.tense_form_kannada})</p>
                                </div>
                            </div>
                        `;
                    });
                    vocabHTML += '</div>';
                    vocabListEl.innerHTML = vocabHTML;
                } else {
                    throw new Error("Vocabulary list is empty or malformed.");
                }
            } catch(e) {
                 vocabListEl.innerHTML = `<p class="text-red-500">Sorry, could not fetch the vocabulary list. Please try again later.</p>`;
                 console.error("Error processing vocabulary:", e);
            }
            
            vocabBtn.innerHTML = originalBtnText;
            vocabBtn.disabled = false;
        }

        vocabBtn.addEventListener('click', getTodaysVocabulary);

        // --- NEW Word Explorer Feature ---
        const wordExplorerBtn = document.getElementById('word-explorer-btn');
        const wordExplorerInput = document.getElementById('word-explorer-input');
        const wordExplorerResult = document.getElementById('word-explorer-result');

        async function exploreWord() {
            const word = wordExplorerInput.value.trim();
            if (!word) {
                wordExplorerResult.innerHTML = '<p class="text-red-500">Please enter a word to explore.</p>';
                return;
            }

            const originalText = wordExplorerBtn.innerHTML;
            wordExplorerBtn.innerHTML = '<div class="loader"></div>';
            wordExplorerBtn.disabled = true;
            wordExplorerResult.innerHTML = `<p class="text-gray-500 text-center italic">Exploring the word "${word}"...</p>`;

            const systemPrompt = "You are an expert English-Kannada lexicographer. You explain words to an English language learner in a simple, clear, and comprehensive way. Provide simple examples.";
            const userPrompt = `Fully analyze the English word: "${word}". Provide its simple English meaning, how to use it (a simple grammar rule or context), when to use it (formality or situation), a simple example sentence, and the simple Kannada meaning for the word itself.
Respond ONLY in JSON format:
{
  "word": "${word}",
  "meaning": "...",
  "how_to_use": "...",
  "when_to_use": "...",
  "example": "...",
  "kannada_meaning": "..."
}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: { responseMimeType: "application/json" }
            };

            try {
                const responseText = await callGemini(payload);
                const data = JSON.parse(responseText);

                if (data.error) {
                    throw new Error(data.error);
                }

                if (data.meaning && data.kannada_meaning) {
                    wordExplorerResult.innerHTML = `
                        <div class="p-4 bg-violet-50 rounded-lg border border-violet-200 space-y-4">
                            <h3 class="text-3xl font-extrabold text-violet-800 capitalize">${data.word}</h3>
                            <p class="text-lg text-gray-700"><strong>Kannada Meaning (ಕನ್ನಡ ಅರ್ಥ):</strong> ${data.kannada_meaning}</p>
                            
                            <div class="pt-2">
                                <h5 class="font-semibold text-violet-700">Meaning (in English)</h5>
                                <p class="text-gray-600">${data.meaning}</p>
                            </div>
                            
                            <div class="pt-2">
                                <h5 class="font-semibold text-violet-700">When to Use (ಯಾವಾಗ ಬಳಸಬೇಕು)</h5>
                                <p class="text-gray-600">${data.when_to_use}</p>
                            </div>
                            
                            <div class="pt-2">
                                <h5 class="font-semibold text-violet-700">How to Use (ಹೇಗೆ ಬಳಸಬೇಕು)</h5>
                                <p class="text-gray-600">${data.how_to_use}</p>
                            </div>
                            
                            <div class="mt-4 p-3 bg-violet-100 border-l-4 border-violet-500 text-violet-800 rounded-r-lg">
                                <p class="font-semibold">Example Sentence (ಉದಾಹರಣೆ ವಾಕ್ಯ):</p>
                                <p class="mt-1 italic">"${data.example}"</p>
                            </div>
                        </div>
                    `;
                } else {
                    throw new Error("Incomplete data received from API.");
                }
            } catch (e) {
                wordExplorerResult.innerHTML = `<p class="text-red-500 text-center">Sorry, I couldn't find information for the word "${word}". Please check the spelling.</p>`;
                console.error("Error in Word Explorer:", e);
            }

            wordExplorerBtn.innerHTML = "Explore Word";
            wordExplorerBtn.disabled = false;
        }

        wordExplorerBtn.addEventListener('click', exploreWord);
        wordExplorerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                exploreWord();
            }
        });

    </script>
</body>
</html>